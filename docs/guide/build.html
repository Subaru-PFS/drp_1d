<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head><meta content="text/html; charset=ISO-8859-1" http-equiv="content-type"><title>Build</title></head><body>
<h1>I. Introduction:</h1>
A C++ port of the EZ python package.<br>
<ul>
  <li>Source code are available at gitlab: <a href="http://gitlab.oamp.dev/ez_analysis/ez_rework/tree/develop/">http://gitlab.oamp.dev/ez_analysis/ez_rework/tree/develop/</a></li>
  <li>Continuous integration server can be found at: <a href="http://cct.oamp.dev:8080/view/EZ/">http://cct.oamp.dev:8080/view/EZ/</a></li>
</ul>
<h1>II. Building from sources:</h1>
<h2>I. Prequisite:</h2>
<ul>
  <li>Git: 1.7.11 or above</li>
  <li>GCC compiler: 4.2.1 or above</li>
  <li>CMake: 2.8.8 or above</li>
  <li>Python: 2.7.5 or above</li>
  <li>Flex &amp; Bison: (In order to compile doxygen)</li>
</ul>
<h2>II. Build and install (Unix and unix like):</h2>
- Clone Git repository:<br>
<span style="font-weight: bold; font-style: italic;">git clone ssh://git@gitlab.oamp.dev/ez_analysis/ez_rework.git $ROOT_DIR</span><br>
<br>
- Build and install third party library by running the buildandinstall.sh script:<br>
<span style="font-weight: bold; font-style: italic;">cd $ROOT_DIR/tools/</span><br style="font-weight: bold; font-style: italic;">
<span style="font-weight: bold; font-style: italic;">python ./buildandinstallthirdparty.py</span><br>
<br>
- Create makefiles:<br>
<span style="font-weight: bold; font-style: italic;">cd $ROOT_DIR/build/</span><br style="font-weight: bold; font-style: italic;">
<span style="font-weight: bold; font-style: italic;">cmake .</span><br>
<br>
- Build Everything:<br>
<span style="font-weight: bold; font-style: italic;">cd $ROOT_DIR/build/</span><br style="font-weight: bold; font-style: italic;">
<span style="font-weight: bold; font-style: italic;">make</span><br>
<h1>III. Continuous integration:</h1>
<h2>I. Introduction:</h2>
The project is hosted on a GitLab server:<br>
<a href="http://gitlab.oamp.dev/ez_analysis/ez_rework">http://gitlab.oamp.dev/ez_analysis/ez_rework</a><br>
<br>
The project is continuoulsy build using Jenkins:<br>
<a href="http://cct.oamp.dev:8080/view/EZ/">http://cct.oamp.dev:8080/view/EZ/</a><br>
<h2>II. Jenkins and Git Connection:</h2>
In order for Jenkins to correctly connect and pull changes from the git
repository, a pair of public/private keys have been created explicitly
for that. (See id_rsa and id_rsa.pub in $ROOT_DIR/docs/keys)<br>
<br>
The public key is used in GitLab in order to create a "Deploy key"
which is a read only access to the Git repository. The private key is
used in Jenkins to create dedicated credentials used during connection
to the Git server.<br>
<br>
In order to connect to a git repository, the "Git Plugin" must be installed on Jenkins.<br>
<h2>III. Build on push:</h2>
In order for Jenkins to trigger a job build on every push, and because
SCM polling is not a very good solution, the build is triggered
remotely from the GitLab server:<br>
<br>
On GitLab, a post push Hook is setup to send the following HTTP POST request to the Jenkins server:<br>
<span style="font-weight: bold; font-style: italic;">http://cct.oamp.dev/buildByToken/build?job=ez_cpp-linux-x86_64&amp;token=TRIGGERBUILD</span><br>
<br>
When Jenkins receive this POST request it will trigger the build.<br>
<br>
In order for this to work the Jenkins plugin "Build Token Root Plugin" must be installed .<br>
( GitLab connect to the HTTP server cct.oamp.dev with anonymous
credential, without this plugin it's not possible to connect to the
HTTP server as an anonymous user )<br>

</body></html>
